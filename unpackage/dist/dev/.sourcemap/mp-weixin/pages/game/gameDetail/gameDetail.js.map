{"version":3,"sources":[null,"webpack:///D:/111代码/111前端/uniapp/垃圾分类/pages/game/gameDetail/gameDetail.vue?5102","webpack:///D:/111代码/111前端/uniapp/垃圾分类/pages/game/gameDetail/gameDetail.vue?74a8","webpack:///D:/111代码/111前端/uniapp/垃圾分类/pages/game/gameDetail/gameDetail.vue?9ca1","uni-app:///pages/game/gameDetail/gameDetail.vue","webpack:///D:/111代码/111前端/uniapp/垃圾分类/pages/game/gameDetail/gameDetail.vue?f7b9","webpack:///D:/111代码/111前端/uniapp/垃圾分类/pages/game/gameDetail/gameDetail.vue?7688","uni-app:///main.js"],"names":["Card","x","y","z","key","data","options","aaa","cardList","saveList","penddingList","tools","three","random","winner","xUnit","yUnit","calcValueList","methods","init","getMaps","cardMap","clickCard","item","setTimeout","isWin","uni","url","cancelCard","e","calcCover","coverMap","setContent","maxCard","valStack","list","count","setCard","canSetCard","map","console","initMap","initContentType","arr","again","title","icon","removeThree","temp","onLoad","onShow","onHide","onUnload","wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;AACc;;;AAGvE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC4BxnB;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA;AAAA,IAEAA;EACA;;EAGA;;EAIA,oBAKA;IAAA,IAJAC;MACAC;MACAC;MACAC;IAAA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EAAA;IAAA;IAAA,OACA;MACA;MACA;MACA;IACA;EAAA;IAAA;IAAA,OACA;MACAJ;IACA;EAAA;IAAA;IAAA,OACA;MACAA;IACA;EAAA;IAAA;IAAA,OACA;MACAA;IACA;EAAA;EAAA;AAAA;AAAA,8BApCAA,WAEA;AAAA,8BAFAA,WAGA;AAAA,8BAHAA,iBAKA;AAAA,8BALAA,iBAMA;AAAA,8BANAA,qBAOA;AAAA,eA+BA;EACA;EACAK;IACA;MACA;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;QACAC;QACAC;MACA;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;MACA;MACAC;MACA;MACA;MACA;MACA;MACA;MACAC;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACAC;UACAC;QACA;MACA;QACAD;UACAC;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;UACA;UACAJ;YACA;YACA;cACA;YACA;YACA;YACA;cACAK;cACA;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAC;MACA;MACA;QACA;QACA,IACA9B,IAEAsB,KAFAtB;UACAC,IACAqB,KADArB;QAEA;UACAqB;QACA;UACAA;QACA;UACAA;QACA;UACAA;QACA;UACAA;QACA;QACAQ;QACAA;QACAA;QACAA;MAEA;IACA;IACA;IACAC;MACA,IACAC,UACA,aADAA;MAEA;MACA;MACA;QACA;QACA;QACA;UACA;UACAC;UACA;UACA;YACAA;cACAX;YACA;YACAW;UACA;QACA;UACAA;QACA;MACA;MACA;MACA;MACAA;QACAC;UACAC;UACAb;QACA;MACA;IACA;IACA;IACAc;MACA,oBAKA;QAJApC;QACAC;QACAC;QACAU;MAEA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;UACA;YACA;YACA;cACA;cACAyB;YACA;cACA;cACAA;YACA;cACA;cACAA;YACA;cACA;cACAA;YACA;cACA;cACAA;YACA;cACAA;YACA;YACA;YACA;cACA;cACA;gBACArC;gBACAC;gBACAC;gBACAC;cACA;cACAA;cACAmC;cACA/B;cACA;cACA;cACA;gBACA;kBACAP;kBACAC;kBACAC;kBACAC;gBACA;gBACAmC;gBACAnC;gBACAI;cACA;YACA;UAEA;QACA;MAEA;MACA;MACAA;MACA;QACA;QACA+B;MACA;MACA/B;MACA;MACAgC;MACA;IACA;IACA;IACAC;MACA,qBAIA;QAHAxC;QACAC;QACAC;MAEA;MACA;MACA;MACA;QACAkB;QACA;UACAA;QACA;MACA;MACA;IACA;IACA;IACAqB;MACA;MACA;MACA;MACA;QACA;UACA;UAAA,YACA;UAAAC;UAAAA;QACA;QACA;MACA;MACA;MACA3C;IACA;IAEA;IACA4C;MACA;IACA;IACA;IACA/B;MACA;QACA;QACA;UACA;UACA;UACA;UACA;QACA;QACA;MACA;QACAa;UACAmB;UACAC;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACA;QACA;UACA;YACAC;YACAA;YACA;UACA;QACA;UACA;YACAA;YACAA;YACA;UACA;QACA;QACA;QACAR;MACA;QACAd;UACAmB;UACAC;QACA;MACA;IACA;EACA;EACAG;IACA;IACA;MACAjD;MACAA;IACA;MACAA;MACAA;IACA;;IAEA;IACA;IACA;IACA;EAEA;EACAkD;IACA;IACA;IACA;IACA;IACA;IACA;MACAV;IACA;IACA;MACAA;MACAA;IACA;EACA;EACAW;IACA;EACA;EACAC;IACA;EACA;AAEA;AAAA,2B;;;;;;;;;;;;;ACzbA;AAAA;AAAA;AAAA;AAA+oC,CAAgB,qnCAAG,EAAC,C;;;;;;;;;;;ACAnqC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;ACNL;AAGA;AACA;AAHA;AACAC,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,mBAAI,CAAC,C","file":"pages/game/gameDetail/gameDetail.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./gameDetail.vue?vue&type=template&id=44dd5d2a&\"\nvar renderjs\nimport script from \"./gameDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./gameDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gameDetail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/game/gameDetail/gameDetail.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./gameDetail.vue?vue&type=template&id=44dd5d2a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./gameDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./gameDetail.vue?vue&type=script&lang=js&\"","<template>\r\n \r\n  <view class=\"container\">\r\n    <image src=\"../../../static/game2.jpg\" mode=\"\"></image>\r\n    <div class=\"card_container\">\r\n      <div class=\"card\" :class=\"[item.cover?'cover':'']\" v-for=\"item in cardList\" :key=\"item.key\" :style=\"item.style\"\r\n        @click=\"clickCard(item,'true')\">{{item.content.name}}</div>\r\n    </div>\r\n\r\n    <div class=\"three_card_container\">\r\n      <div class=\"card\" v-for=\"item in saveList\" :key=\"item.key\" :style=\"item.style\" @click=\"clickCard(item,'false')\">\r\n        {{item.content.name}}</div>\r\n    </div>\r\n    <div class=\"choose_card_container\">\r\n      <div class=\"card\" v-for=\"item in penddingList\" :key=\"item.key\" :style=\"item.style\">{{item.content.name}}</div>\r\n    </div>\r\n    <div class=\"tool\">\r\n      <button class=\"btn\" @click=\"removeThree\">取出三张卡片</button>\r\n      <button class=\"btn\" @click=\"random\">随机</button>\r\n      <button class=\"btn\" @click=\"again\">再来一轮</button>\r\n    </div>\r\n    </div>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  // 引入垃圾总和的数组\r\n  import contentType from '../../../tool/contentType.js'\r\n  class Card {\r\n    // 卡片的宽高,只有原本高度的一半，因为之后一个卡片占2*2的数组大小，方便形成上层卡片压到下层卡片的某个角的效果。\r\n    static x = 20;\r\n    static y = 25;\r\n    // 偏移量\r\n    static offsetx = 25;\r\n    static offsety = 25;\r\n    static contentType = [];\r\n    constructor({\r\n      x,\r\n      y,\r\n      z,\r\n      key\r\n    }) {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.z = z;\r\n      this.key = key;\r\n      this.val = key;\r\n      this.content = {};\r\n      this.cover = false;\r\n      this.style = `top: ${y*Card.y+Card.offsety}px;left:${x*Card.x+Card.offsetx}px;`\r\n    }\r\n    setVal(val) {\r\n      this.val = val - 1;\r\n      this.content = Card.contentType[val - 1]\r\n      this.style += `${this.content.style}`\r\n    }\r\n    static setContentType(list) {\r\n      Card.contentType = list\r\n    }\r\n    static setCardOffsetX(offset) {\r\n      Card.offsetx = offset * 30\r\n    }\r\n    static setCardOffsetY(offsety){\r\n      Card.offsety=offsety*30\r\n    }\r\n  }\r\n  export default {\r\n    // let innerAudioContext = uni.createInnerAudioContext();\r\n    data() {\r\n      return {\r\n        // innerAudioContext:inner,\r\n        options: {},\r\n        aaa: '🧻',\r\n        // 所有卡片\r\n        cardList: [],\r\n        // 保存的三张卡片\r\n        saveList: [],\r\n        // 选择的卡片\r\n        penddingList: [],\r\n        // 判断道具是否可以使用\r\n        tools: {\r\n          three: true,\r\n          random: true,\r\n        },\r\n        // 判断是否以及获胜\r\n        winner: false,\r\n        // 数组的很轴和纵轴\r\n        xUnit: 0,\r\n        yUnit: 0,\r\n        // 用于判断是否构成三张相同的可以消除\r\n        calcValueList: [],\r\n      };\r\n    },\r\n    methods: {\r\n      // 初始化游戏\r\n      init() {\r\n        // 清空list\r\n        this.cardList = []\r\n        this.penddingList = []\r\n        this.saveList = []\r\n        // 重置tools\r\n        this.tools.three = true\r\n        this.tools.random = true\r\n        // 绘制卡片地图\r\n        this.getMaps()\r\n      },\r\n      // 绘制卡片地图\r\n      getMaps() {\r\n        // 初始化网络地图\r\n        let cardMap = this.initMap()\r\n        // 根据卡片密度，向cardmap中放入card,此时的卡片没有内容\r\n        cardMap = this.setCard(cardMap)\r\n        // 设置卡片的内容\r\n        this.setContent()\r\n        // 计算卡片的遮罩关系\r\n        this.calcCover(cardMap)\r\n      },\r\n      clickCard(item, flag) {\r\n        // flag用来判断点击的是map中的还是saveList中的\r\n        if (flag) {\r\n          // 将点击的卡片冲cardList中去除，保存在penddingList中\r\n          let index = this.cardList.indexOf(item)\r\n          this.cardList = this.cardList.slice(0, index).concat(this.cardList.slice(index + 1))\r\n        } else {\r\n          // 将点击的卡片冲cardList中去除，保存在penddingList中\r\n          let index = this.saveList.indexOf(item)\r\n          this.saveList = this.saveList.slice(0, index).concat(this.saveList.slice(index + 1))\r\n        }\r\n        // 重新设置item的style\r\n        item.style = `left:${(this.penddingList.length-1)*Card.x*2+30*2}px;${item.content.style}`\r\n        this.penddingList.push(item)\r\n        // 重新计算遮挡关系\r\n        this.calcCover()\r\n        //判断是否有三个重复的可以消除\r\n        this.cancelCard()\r\n        setTimeout(() => {\r\n          // 判断是否成功或失败\r\n          this.isWin()\r\n        }, 300)\r\n      },\r\n      // 判断是否成功或失败\r\n      isWin() {\r\n        if (this.penddingList.length === 7) {\r\n          uni.navigateTo({\r\n            url: '/pages/game/gameResult/gameResult?winner=false'\r\n          })\r\n        } else if (this.cardList.length === 0) {\r\n          uni.navigateTo({\r\n            url: '/pages/game/gameResult/gameResult?winner=true'\r\n          })\r\n        }\r\n      },\r\n      // 三个重复的可以消除\r\n      cancelCard() {\r\n        this.calcValueList = new Array(this.options.maxCard).fill(0)\r\n        this.penddingList.some(item => {\r\n          this.calcValueList[item.val]++\r\n          if (this.calcValueList[item.val] === 3) {\r\n            // 设置定时器，延后一点进行清除,使第三张卡片显示出来\r\n            setTimeout(() => {\r\n              // 清除penddinglist中对应的卡片\r\n              this.penddingList = this.penddingList.filter(e => {\r\n                return e.val !== item.val\r\n              })\r\n              // 重新更新penddingList中的卡片样式\r\n              this.penddingList = this.penddingList.map((e, index) => {\r\n                e.style = `left:${(index-1)*Card.x*2+30*2}px;${e.content.style}`\r\n                return e\r\n              })\r\n            }, 300)\r\n          }\r\n        })\r\n      },\r\n      // 计算卡片遮罩关系\r\n      calcCover() {\r\n        // 从后往前，后面的层数高\r\n        // 初始化cover数组，false表示改位置没有卡片，true表示该位置的上方有卡片，需要设置cover样式\r\n        let coverMap = new Array(this.yUnit)\r\n        for (let i = 0; i < this.yUnit; i++) {\r\n          coverMap[i] = new Array(this.xUnit).fill(false)\r\n        }\r\n        for (let i = this.cardList.length - 1; i >= 0; i--) {\r\n          const item = this.cardList[i]\r\n          const {\r\n            x,\r\n            y\r\n          } = item\r\n          if (coverMap[y][x]) {\r\n            item.cover = true\r\n          } else if (coverMap[y + 1][x]) {\r\n            item.cover = true\r\n          } else if (coverMap[y][x + 1]) {\r\n            item.cover = true\r\n          } else if (coverMap[y + 1][x + 1]) {\r\n            item.cover = true\r\n          } else {\r\n            item.cover = false\r\n          }\r\n          coverMap[y][x] = true\r\n          coverMap[y + 1][x] = true\r\n          coverMap[y][x + 1] = true\r\n          coverMap[y + 1][x + 1] = true\r\n\r\n        }\r\n      },\r\n      // 设置卡片的内容\r\n      setContent() {\r\n        const {\r\n          maxCard\r\n        } = this.options\r\n        const valStack = new Array(maxCard)\r\n        // 给卡片设置值\r\n        this.cardList.forEach((item) => {\r\n          // 随机一个种类\r\n          const value = Math.ceil(Math.random() * maxCard);\r\n          if (valStack[value]) {\r\n            // 将item赋值这个种类的卡片\r\n            valStack[value].push(item);\r\n            // 将他们进行三个三个配对\r\n            if (valStack[value].length === 3) {\r\n              valStack[value].forEach((item) => {\r\n                item.setVal(value);\r\n              });\r\n              valStack[value] = null;\r\n            }\r\n          } else {\r\n            valStack[value] = [item];\r\n          }\r\n        });\r\n        // 对为进行分类的重新分类\r\n        let count = 2;\r\n        valStack.forEach(list => {\r\n          list && list.map(item => {\r\n            count++\r\n            item.setVal(Math.floor(count / 3))\r\n          })\r\n        })\r\n      },\r\n      // 初始化地图，确认卡片位置\r\n      setCard(map) {\r\n        const {\r\n          x,\r\n          y,\r\n          z,\r\n          random\r\n        } = this.options\r\n        let key = 0\r\n        const cardList = []\r\n        const shrinkSpeed = 3\r\n        for (let k = 0; k < z; k++) {\r\n          const shrink = Math.floor((z - k - 1) / shrinkSpeed)\r\n          const shrinkX = Math.min(Math.floor(this.xUnit / 2) - 2, shrink)\r\n          const shrinkY = Math.min(Math.floor(this.yUnit / 2) - 2, shrink)\r\n          // 行\r\n          // -1是因为y是*2后的，最后一行不能放置卡片，不然就会超出边界\r\n          for (let i = shrinkY; i < this.yUnit - 1 - shrinkY; i++) {\r\n            // 列\r\n            for (let j = shrinkX; j < Math.ceil((this.xUnit - 1) / 2); j++) {\r\n              let canSetCard = true\r\n              if (j > 0 && map[k][i][j - 1]) {\r\n                // 左边不能有卡片\r\n                canSetCard = false\r\n              } else if (i > 0 && map[k][i - 1][j]) {\r\n                // 上面不能有卡片\r\n                canSetCard = false\r\n              } else if (i > 0 && j > 0 && map[k][i - 1][j - 1]) {\r\n                // 左上角不能有卡片\r\n                canSetCard = false\r\n              } else if (i > 0 && map[k][i - 1][j + 1]) {\r\n                // 右上角不能有卡片\r\n                canSetCard = false\r\n              } else if (k > 0 && map[k - 1][i][j]) {\r\n                // 正底下不能有卡片\r\n                canSetCard = false\r\n              } else if (Math.random() > random) {\r\n                canSetCard = false\r\n              }\r\n              // 如果这个位置可以放置卡片，那么根据随机数，设置卡片的密度\r\n              if (canSetCard) {\r\n                const rand = Math.random()\r\n                const card = new Card({\r\n                  x: j,\r\n                  y: i,\r\n                  z: k,\r\n                  key\r\n                })\r\n                key++\r\n                map[k][i][j] = card\r\n                cardList.push(card)\r\n                // 对称放置卡片\r\n                const mirror = this.xUnit - 2 - j\r\n                if (mirror > j) {\r\n                  const item = new Card({\r\n                    x: mirror,\r\n                    y: i,\r\n                    z: k,\r\n                    key\r\n                  })\r\n                  map[k][i][mirror] = item\r\n                  key++\r\n                  cardList.push(item)\r\n                }\r\n              }\r\n\r\n            }\r\n          }\r\n         \r\n        }\r\n        // 卡片形成三的倍数,去掉顶层的卡片，因为顶层的卡片最多\r\n        cardList.reverse()\r\n        for (let i = 0; i < key % 3; i++) {\r\n          let item = cardList.pop()\r\n          map[item.z][item.y][item.x] = 0\r\n        }\r\n        cardList.reverse()\r\n        this.cardList = cardList\r\n        console.log('333',this.cardList);\r\n        return map\r\n      },\r\n      // 初始化网络地图\r\n      initMap() {\r\n        const {\r\n          x,\r\n          y,\r\n          z\r\n        } = this.options\r\n        this.xUnit = x * 2\r\n        this.yUnit = y * 2\r\n        const cardMap = new Array(z)\r\n        for (var i = 0; i < z; i++) {\r\n          cardMap[i] = new Array(this.yUnit)\r\n          for (var j = 0; j < this.yUnit; j++) {\r\n            cardMap[i][j] = new Array(this.xUnit).fill(0)\r\n          }\r\n        }\r\n        return cardMap\r\n      },\r\n      // 根据maxCard初始化card类中的contentType数组，随机生产垃圾\r\n      initContentType() {\r\n        const contentList = contentType\r\n        // 随机卡片样式数组\r\n        // 洗牌算法\r\n        let shuffle = (arr) => {\r\n          for (let i = arr.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            [arr[i], arr[j]] = [arr[j], arr[i]];\r\n          }\r\n          return arr;\r\n        }\r\n        const selected = shuffle(contentList).slice(0, this.options.maxCard)\r\n        Card.setContentType(selected)\r\n      },\r\n\r\n      // 再来一轮\r\n      again() {\r\n        this.init()\r\n      },\r\n      // 随机\r\n      random() {\r\n        if (this.tools.random) {\r\n          // 使用洗牌算法\r\n          for (let i = this.cardList.length - 1; i > 0; i--) {\r\n            const j = Math.floor(Math.random() * (i + 1));\r\n            let temp = this.cardList[i].content\r\n            this.cardList[i].content = this.cardList[j].content\r\n            this.cardList[j].content = temp\r\n          }\r\n          this.tools.random = false\r\n        } else {\r\n          uni.showToast({\r\n            title: '该功能只能使用一次',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      },\r\n      // 取出三张卡片\r\n      removeThree() {\r\n        if (this.tools.three) {\r\n          // 判断penddingList是否有三张卡片\r\n          let temp;\r\n          if (this.penddingList.length >= 3) {\r\n            for (let i = 0; i < 3; i++) {\r\n              temp = this.penddingList.pop()\r\n              temp.style = `left:${(this.saveList.length-1)*Card.x*2+30*2}px;${temp.content.style}`\r\n              this.saveList.push(temp)\r\n            }\r\n          } else {\r\n            while (this.penddingList.length !== 0) {\r\n              temp = this.penddingList.pop()\r\n              temp.style = `left:${(this.saveList.length-1)*Card.x*2+30*2}px;${temp.content.style}`\r\n              this.saveList.push(temp)\r\n            }\r\n          }\r\n          this.tools.three = false\r\n          console.log('123', this.saveList);\r\n        } else {\r\n          uni.showToast({\r\n            title: '该功能只能使用一次',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      }\r\n    },\r\n    onLoad(option) {\r\n      this.options = JSON.parse(option.options)\r\n      if (this.options.x <= 3) {\r\n        Card.setCardOffsetX(8 - this.options.x -1)\r\n        Card.setCardOffsetY(8-this.options.y-1)\r\n      } else {\r\n        Card.setCardOffsetX(8 - this.options.x+1)\r\n        Card.setCardOffsetY(8-this.options.y+1)\r\n      }\r\n\r\n      // 根据maxCard初始化card类中的contentType数组，随机生产垃圾\r\n      this.initContentType()\r\n      // 初始化游戏\r\n      this.init(this.options)\r\n    \r\n    },\r\n    onShow() {\r\n      this.init()\r\n      this.innerAudioContext = uni.createInnerAudioContext();\r\n      this.innerAudioContext.autoplay = true;\r\n     this. innerAudioContext.loop=true;\r\n      this.innerAudioContext.src = \"https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-hello-uniapp/2cc220e0-c27a-11ea-9dfb-6da8e309e0d8.mp3\";\r\n      this.innerAudioContext.onPlay(() => {\r\n        console.log('开始播放');\r\n      });\r\n     this. innerAudioContext.onError((res) => {\r\n        console.log(res.errMsg);\r\n        console.log(res.errCode);\r\n      });\r\n    },\r\n    onHide() {\r\n      this.innerAudioContext.pause()\r\n    },\r\n    onUnload() {\r\n      this.innerAudioContext.pause()\r\n    }\r\n\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  .container {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    position: relative;\r\n\r\n    image {\r\n      position: absolute;\r\n      width: 100vw;\r\n      height: 100vh;\r\n      opacity: 0.6;\r\n    }\r\n\r\n    .card_container {\r\n      position: relative;\r\n      padding: 30px;\r\n      height: 300px;\r\n    }\r\n\r\n    .tool {\r\n      position: absolute;\r\n      display: flex;\r\n      width: 100vw;\r\n      bottom: 10px;\r\n      // transform: translate(-50%,0);\r\n      justify-content: space-around;\r\n    }\r\n\r\n    .three_card_container {\r\n      position: relative;\r\n      display: flex;\r\n      width: 100%;\r\n      height: 55px;\r\n      padding: 10px 20px;\r\n      top:90px;\r\n\r\n      // background-color: green;\r\n      .card {\r\n        margin-right: 7px;\r\n      }\r\n    }\r\n\r\n    .choose_card_container {\r\n      position: relative;\r\n      display: flex;\r\n      margin-top: 20px;\r\n      width: 90%;\r\n      left: 10px;\r\n      bottom: -80px;\r\n      height: 70px;\r\n      padding: 10px 15px;\r\n      // background-color: #ccebc6;\r\n      border: 1px solid black;\r\n      border-radius: 20px;\r\n      box-sizing: border-box;\r\n      \r\n      margin: 10px 10px;\r\n      // opacity: 0.3;\r\n\r\n      .card {\r\n        margin-right: 7px;\r\n        // opacity: 10;\r\n      }\r\n    }\r\n  }\r\n\r\n  .card {\r\n    font-size: 28px;\r\n    text-align: center;\r\n    position: absolute;\r\n    border-radius: 2px;\r\n    box-sizing: border-box;\r\n    background: #ddd;\r\n    opacity: 1;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    box-shadow: 0px 3px 0 0 #fff, 0 8px 0 0 #ddd, 0 8px 0 2px #333, 0 0 0 2px #333;\r\n\r\n    &:hover {\r\n      transform: scale3d(1.1, 1.1, 1.1);\r\n      z-index: 1;\r\n    }\r\n  }\r\n\r\n  .cover {\r\n    pointer-events: none;\r\n    box-shadow: 0px 3px 0 0 #999, 0 8px 0 0 #666, 0 8px 0 2px #000, 0 0 0 2px #000;\r\n  }\r\n\r\n  .cover:after {\r\n    border-radius: 2px;\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0;\r\n    top: 0;\r\n    background: #000;\r\n    opacity: 0.55;\r\n  }\r\n</style>\r\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./gameDetail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./gameDetail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681908596686\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/game/gameDetail/gameDetail.vue'\ncreatePage(Page)"],"sourceRoot":""}