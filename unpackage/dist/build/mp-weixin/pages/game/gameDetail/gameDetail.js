(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/game/gameDetail/gameDetail"],{"4b1d":function(t,n,i){},"80c2":function(t,n,i){"use strict";i.d(n,"b",(function(){return e})),i.d(n,"c",(function(){return s})),i.d(n,"a",(function(){}));var e=function(){var t=this.$createElement;this._self._c},s=[]},"9d7f":function(t,n,i){"use strict";i.r(n);var e=i("ddc4"),s=i.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return e[t]}))}(o);n["default"]=s.a},a584:function(t,n,i){"use strict";var e=i("4b1d"),s=i.n(e);s.a},b211:function(t,n,i){"use strict";(function(t,n){var e=i("4ea4");i("32b1");e(i("66fd"));var s=e(i("b4c7"));t.__webpack_require_UNI_MP_PLUGIN__=i,n(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},b4c7:function(t,n,i){"use strict";i.r(n);var e=i("80c2"),s=i("9d7f");for(var o in s)["default"].indexOf(o)<0&&function(t){i.d(n,t,(function(){return s[t]}))}(o);i("a584");var a=i("f0c5"),r=Object(a["a"])(s["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);n["default"]=r.exports},ddc4:function(t,n,i){"use strict";(function(t){var e=i("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e(i("970b")),o=e(i("5bc3")),a=e(i("9523")),r=e(i("ae3c")),c=function(){function t(n){var i=n.x,e=n.y,o=n.z,a=n.key;(0,s.default)(this,t),this.x=i,this.y=e,this.z=o,this.key=a,this.val=a,this.content={},this.cover=!1,this.style="top: ".concat(e*t.y+t.offsety,"px;left:").concat(i*t.x+t.offsetx,"px;")}return(0,o.default)(t,[{key:"setVal",value:function(n){this.val=n-1,this.content=t.contentType[n-1],this.style+="".concat(this.content.style)}}],[{key:"setContentType",value:function(n){t.contentType=n}},{key:"setCardOffsetX",value:function(n){t.offsetx=30*n}},{key:"setCardOffsetY",value:function(n){t.offsety=30*n}}]),t}();(0,a.default)(c,"x",20),(0,a.default)(c,"y",25),(0,a.default)(c,"offsetx",25),(0,a.default)(c,"offsety",25),(0,a.default)(c,"contentType",[]);var h={data:function(){return{options:{},aaa:"🧻",cardList:[],saveList:[],penddingList:[],tools:{three:!0,random:!0},winner:!1,xUnit:0,yUnit:0,calcValueList:[]}},methods:{init:function(){this.cardList=[],this.penddingList=[],this.saveList=[],this.tools.three=!0,this.tools.random=!0,this.getMaps()},getMaps:function(){var t=this.initMap();t=this.setCard(t),this.setContent(),this.calcCover(t)},clickCard:function(t,n){var i=this;if(n){var e=this.cardList.indexOf(t);this.cardList=this.cardList.slice(0,e).concat(this.cardList.slice(e+1))}else{var s=this.saveList.indexOf(t);this.saveList=this.saveList.slice(0,s).concat(this.saveList.slice(s+1))}t.style="left:".concat((this.penddingList.length-1)*c.x*2+60,"px;").concat(t.content.style),this.penddingList.push(t),this.calcCover(),this.cancelCard(),setTimeout((function(){i.isWin()}),300)},isWin:function(){7===this.penddingList.length?t.navigateTo({url:"/pages/game/gameResult/gameResult?winner=false"}):0===this.cardList.length&&t.navigateTo({url:"/pages/game/gameResult/gameResult?winner=true"})},cancelCard:function(){var t=this;this.calcValueList=new Array(this.options.maxCard).fill(0),this.penddingList.some((function(n){t.calcValueList[n.val]++,3===t.calcValueList[n.val]&&setTimeout((function(){t.penddingList=t.penddingList.filter((function(t){return t.val!==n.val})),t.penddingList=t.penddingList.map((function(t,n){return t.style="left:".concat((n-1)*c.x*2+60,"px;").concat(t.content.style),t}))}),300)}))},calcCover:function(){for(var t=new Array(this.yUnit),n=0;n<this.yUnit;n++)t[n]=new Array(this.xUnit).fill(!1);for(var i=this.cardList.length-1;i>=0;i--){var e=this.cardList[i],s=e.x,o=e.y;t[o][s]||t[o+1][s]||t[o][s+1]||t[o+1][s+1]?e.cover=!0:e.cover=!1,t[o][s]=!0,t[o+1][s]=!0,t[o][s+1]=!0,t[o+1][s+1]=!0}},setContent:function(){var t=this.options.maxCard,n=new Array(t);this.cardList.forEach((function(i){var e=Math.ceil(Math.random()*t);n[e]?(n[e].push(i),3===n[e].length&&(n[e].forEach((function(t){t.setVal(e)})),n[e]=null)):n[e]=[i]}));var i=2;n.forEach((function(t){t&&t.map((function(t){i++,t.setVal(Math.floor(i/3))}))}))},setCard:function(t){for(var n=this.options,i=(n.x,n.y,n.z),e=n.random,s=0,o=[],a=0;a<i;a++)for(var r=Math.floor((i-a-1)/3),h=Math.min(Math.floor(this.xUnit/2)-2,r),l=Math.min(Math.floor(this.yUnit/2)-2,r),f=l;f<this.yUnit-1-l;f++)for(var u=h;u<Math.ceil((this.xUnit-1)/2);u++){var d=!0;if((u>0&&t[a][f][u-1]||f>0&&t[a][f-1][u]||f>0&&u>0&&t[a][f-1][u-1]||f>0&&t[a][f-1][u+1]||a>0&&t[a-1][f][u]||Math.random()>e)&&(d=!1),d){Math.random();var p=new c({x:u,y:f,z:a,key:s});s++,t[a][f][u]=p,o.push(p);var v=this.xUnit-2-u;if(v>u){var y=new c({x:v,y:f,z:a,key:s});t[a][f][v]=y,s++,o.push(y)}}}o.reverse();for(var g=0;g<s%3;g++){var x=o.pop();t[x.z][x.y][x.x]=0}return o.reverse(),this.cardList=o,console.log("333",this.cardList),t},initMap:function(){var t=this.options,n=t.x,i=t.y,e=t.z;this.xUnit=2*n,this.yUnit=2*i;for(var s=new Array(e),o=0;o<e;o++){s[o]=new Array(this.yUnit);for(var a=0;a<this.yUnit;a++)s[o][a]=new Array(this.xUnit).fill(0)}return s},initContentType:function(){var t=r.default,n=function(t){for(var n=t.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),e=[t[i],t[n]];t[n]=e[0],t[i]=e[1]}return t}(t).slice(0,this.options.maxCard);c.setContentType(n)},again:function(){this.init()},random:function(){if(this.tools.random){for(var n=this.cardList.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),e=this.cardList[n].content;this.cardList[n].content=this.cardList[i].content,this.cardList[i].content=e}this.tools.random=!1}else t.showToast({title:"该功能只能使用一次",icon:"none"})},removeThree:function(){if(this.tools.three){var n;if(this.penddingList.length>=3)for(var i=0;i<3;i++)n=this.penddingList.pop(),n.style="left:".concat((this.saveList.length-1)*c.x*2+60,"px;").concat(n.content.style),this.saveList.push(n);else while(0!==this.penddingList.length)n=this.penddingList.pop(),n.style="left:".concat((this.saveList.length-1)*c.x*2+60,"px;").concat(n.content.style),this.saveList.push(n);this.tools.three=!1,console.log("123",this.saveList)}else t.showToast({title:"该功能只能使用一次",icon:"none"})}},onLoad:function(t){this.options=JSON.parse(t.options),this.options.x<=3?(c.setCardOffsetX(8-this.options.x-1),c.setCardOffsetY(8-this.options.y-1)):(c.setCardOffsetX(8-this.options.x+1),c.setCardOffsetY(8-this.options.y+1)),this.initContentType(),this.init(this.options)},onShow:function(){this.init(),this.innerAudioContext=t.createInnerAudioContext(),this.innerAudioContext.autoplay=!0,this.innerAudioContext.loop=!0,this.innerAudioContext.src="https://bjetxgzv.cdn.bspapp.com/VKCEYUGU-hello-uniapp/2cc220e0-c27a-11ea-9dfb-6da8e309e0d8.mp3",this.innerAudioContext.onPlay((function(){console.log("开始播放")})),this.innerAudioContext.onError((function(t){console.log(t.errMsg),console.log(t.errCode)}))},onHide:function(){this.innerAudioContext.pause()},onUnload:function(){this.innerAudioContext.pause()}};n.default=h}).call(this,i("543d")["default"])}},[["b211","common/runtime","common/vendor"]]]);